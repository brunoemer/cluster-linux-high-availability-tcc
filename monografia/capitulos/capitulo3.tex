\chapter{Virtualização}
\label{cap:virtualizacao}

O conceito virtualização surgiu na década de 60, sendo que muitas vezes havia a necessidade de cada usuário utilizar um ambiente individual 
com suas próprias aplicações e totalmente isolado dos outros usuários. Sabendo que naquela época era utilizado grandes servidores, conhecidos
como \textit{mainframes}, para a execução dessas aplicações, assim aproveitando ineficientemente o \textit{hardware}. Por esse motivo houve
a necessidade da criação de máquinas virtuais, mais conhecida como \ac{VM}, que surgiram com um dos principais sistemas comerciais com
suporte a virtualização, \ac{OS} \textit{370} que foi desenvolvido pela \textit{IBM} \cite{laureano2008}.
%O conceito virtualização surgiu na década de 60, sendo que um dos principais motivos foi a necessidade de um grande servidor,
%conhecido como \textit{mainframe}, executar uma variedade de \textit{softwares}. Isso ocorreu pois cada \textit{mainframe} necessitava
%do próprio sistema operacional, pois cada \textit{software} possuia além da aplicação todo o ambiente operacional no qual executava. Assim
%sendo necessário a criação de máquinas virtuais, mais conhecida como \ac{VM} \cite{carissimi2008}.

CONCEITO VIRTUALIZACAO VER reis e oliveira.

A virtualização é definida como uma camada entre o \textit{hardware} e o sistema operacional que possibilita a divisão e proteção
dos recursos físicos. Virtualização utiliza abstração em sua arquitetura, por exemplo, ela transforma um disco físico em dois discos 
virtuais menores, sendo que esses discos virtuais são arquivos armazenados no disco físico. Sabendo que arquivos são uma abstração
em um disco físico, pode-se dizer que virtualização não é apenas uma camada de abstração do \textit{hardware}, ela faz a emulação 
do \textit{hardware} \cite{smithenair2005}. ???

Em muitos casos empresas utilizam serviços distribuídos entre servidores físicos, como por exemplo servidores de e-mail, hospedagens e 
banco de dados. Com isso existe uma ociosidade grande de recursos. Uma das grandes vantagens da virtualização é o melhor aproveitamento
destes recursos, alocando vários serviços em uma única máquina gera um melhor aproveitamento do \textit{hardware} \cite{moreira2006}.
Além disso pode-se ter uma redução de custos com administração e manutenção dos servidores. Em um ambiente heterogênio pode-se também
utilizar virtualização, pois ela permite a instalação de diversos sistemas operacionais em um único servidor.

Atualmente o elevado custo da energia elétrica realça a necessidade de redução do consumo, que pode ser feito através da implantação 
de servidores mais robustos para substituir dezenas de servidores comuns, assim reduzindo o consumo de energia elétrica. 
Outros fatores como refrigeração do ambiente e espaço físico utilizado também podem ser reduzidos com a implantação de virtualização de
servidores, e consequentemente reduzem os custos de energia também.

A virtualização favorece a implementação do conceito um servidor por serviço, que consiste em ter um servidor para cada serviço.
Mas porque não colocar todos serviços em um único servidor? Muitas vezes com uma variedade de serviços é necessário diferentes 
sistemas operacionais, ou os serviços necessitam rodar nas mesmas portas, portanto isto se torna inviável. Outro fator relevante que 
também favorece a implementação de um servidor por serviço é, caso exista uma falha de segurança em apenas um serviço, essa 
vulnerabilidade poderá comprometer todos os outros serviços 
\cite{carissimi2008}.

\section{Tipos de virtualização}

\begin{itemize}
 \item Emulação
 \item Virtualização completa
 \item Paravirtualização
 \item Virtualização baseada em contêineres
\end{itemize}

ver jvm e wine

\section{Funcionamento}

** Anéis de privilégios, e hypervisor \cite{goncalves2009}.


%Virtualização_ da teoria a soluções.pdf
%virtualizacao mainframes: pag 1 - Alta Disponibilidade em Servidores Virtualizados.pdf
%pag 32 - Rejuvenescimento e migracao de vms - Matheus D'Eça de Melo.pdf
%pag 20 - Implementação de Alta disponibilidade em Máquinas Virtuais utilizando Software Livre.pdf
%ferramentas pag 4 - Main - Virtualização de serviços baseado em contêineres -WandersonReis.pdf

%Virtualizacao da teoria a solucoes:
%No entanto, essa abordagem trouxe como contra-partida a filosofia “um servidor
%por serviço”. Rapidamente, os responsáveis pelas áreas de TI se deram conta do
%problema (e custo) em gerenciar diferentes máquinas físicas, mesmo que tivessem o
%mesmo sistema operacional. Além disso, há problemas relacionados com consumo de
%energia elétrica, refrigeração, espaço físico, segurança física, etc. Nesse contexto, a
%virtualização surge como uma possibilidade de agregar os benefícios da componetização
%de sofware com a redução dos custos de manutenção de hardware e software. Assim, é
%possível manter a idéia de um “um servidor por serviço” sem ter um hardware
%específico.
%Essa abordagem é reforçada pela lei de Zipf [Adamic, 2008] que pode ser
%sintetizada da seguinte forma: a freqüência de um evento é proporcional a x −α , onde x é
%um ranking de comparação de um evento a outro. Alguns estudos [Breslau, Cao, Fan,
%Philips e Shenker, 2008] mostraram que a freqüência de acesso a servidores web e
%outros serviços Internet seguem uma distribuição Zipfian, o que, na prática, se traduz
%pelo fato de que a maioria dos acessos a serviços Internet é para uma minoria deles.
%Portanto, conclui-se que uma minoria de serviços está ativa enquanto a maioria está
%bloqueada a espera de requisições, o que, claramente, representa um desperdício de
%recursos. Para exemplificar, imagine, entre outros, o uso dos servidores de autenticação,
%DHCP, impressão, arquivos, e-mail, web e DNS em sua rede corporativa.

%Rejuvenescimento e migracao de vms:
%Com a arquitetura baseada em serviços, clientes podem utilizar serviços alocados em
%nuvem através dos web browsers. Unindo a computação em nuvem e a arquitetura baseada
%em serviços, aplicativos e demais recursos de TI podem ser oferecidos remotamente, como se
%estivessem localizados localmente. Vale a pena salientar que a arquitetura baseada em serviços
%permite monitorar em tempo real o uso dos recursos disponibilizados, colaborando assim para
%uma gerência mais eficiente a todo o sistema (LINTHICUM, 2009). Além disso, dependendo
%das interfaces definidas, pode-se ampliar consideravelmente o número de potenciais clientes.
%Recursos disponibilizados via navegador web, por exemplo, podem ser acessados tanto por
%computadores de mesa quanto por smartphones ou tablets.
%

%ver failover e failback em cluster?
